import{p as D,n as S,o as L,q as k,t as v,s as q,m as E,r as F,R as M,j as e,d as o,e as u,f as j,l as h,i as f,v as g,B as c,L as N,P as b,w as z,x as B,y as P,z as R,A,H}from"./index-DuhrEx3s.js";const K={createOrder:r=>D("/snf-orders",r)},Q=()=>{const r=S(),{data:l=[],isLoading:d,isError:i,error:t,refetch:p}=L({queryKey:["addresses"],queryFn:async()=>await E("/delivery-addresses")}),m=k({mutationFn:async a=>await q(`/delivery-addresses/${a}/set-default`,{}),onSuccess:()=>{r.invalidateQueries({queryKey:["addresses"]}),v.success("Default address updated")},onError:a=>v.error((a==null?void 0:a.message)||"Failed to set default")}),n=l.find(a=>a.isDefault);return{addresses:l,defaultAddress:n,isLoading:d,isError:i,error:t,refetch:p,setDefaultAddress:m.mutate,isSettingDefault:m.isPending}},O=({selectedAddressId:r,onAddressSelect:l,onEditAddress:d})=>{const{addresses:i,defaultAddress:t,isLoading:p,isError:m,error:n}=Q(),[a,y]=F.useState(r||(t==null?void 0:t.id)||"");M.useEffect(()=>{!r&&t&&!a&&(y(t.id),l(t))},[t,r,a,l]);const C=s=>{const x=i.find(w=>w.id===s);x&&(y(s),l(x))};return p?e.jsxs(o,{children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"size-4"}),"Delivery Address"]})}),e.jsx(f,{className:"space-y-3",children:[...Array(2)].map((s,x)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{className:"h-4 w-2/3"}),e.jsx(g,{className:"h-3 w-1/2"}),e.jsx(g,{className:"h-3 w-5/6"})]},x))})]}):m?e.jsxs(o,{className:"border-red-200",children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2 text-red-600",children:[e.jsx(h,{className:"size-4"}),"Address Error"]})}),e.jsxs(f,{children:[e.jsx("p",{className:"text-sm text-red-600 mb-3",children:(n==null?void 0:n.message)||"Failed to load addresses"}),e.jsx(c,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(N,{to:"/snf/address",children:"Manage Addresses"})})]})]}):!i||i.length===0?e.jsxs(o,{className:"border-yellow-200",children:[e.jsx(u,{children:e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"size-4"}),"No Addresses Found"]})}),e.jsxs(f,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"You need to add a delivery address to place an order."}),e.jsx(c,{asChild:!0,size:"sm",children:e.jsxs(N,{to:"/snf/addresses",children:[e.jsx(b,{className:"size-4 mr-2"}),"Add Address"]})})]})]}):e.jsxs(o,{children:[e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(j,{className:"flex items-center gap-2",children:[e.jsx(h,{className:"size-4"}),"Select Delivery Address"]}),e.jsx(c,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(N,{to:"/snf/address",children:[e.jsx(z,{className:"size-4 mr-2"}),"Manage"]})})]})}),e.jsxs(f,{children:[e.jsx(B,{value:a,onValueChange:C,className:"space-y-3",children:i.map(s=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(P,{value:s.id,id:s.id,className:"mt-1"}),e.jsx(R,{htmlFor:s.id,className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:s.recipientName}),s.label&&e.jsx(A,{variant:"secondary",className:"text-xs",children:s.label}),s.isDefault&&e.jsxs(A,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 text-xs",children:[e.jsx(H,{className:"h-3 w-3 mr-1"}),"Default"]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.plotBuilding,s.plotBuilding&&s.streetArea?", ":"",s.streetArea]}),s.landmark&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Landmark: ",s.landmark]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.city,", ",s.state," - ",s.pincode]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Mobile: ",s.mobile]})]})}),d&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>d(s),className:"mt-1",children:e.jsx(z,{className:"size-4"})})]},s.id))}),e.jsx("div",{className:"mt-4 pt-3 border-t",children:e.jsx(c,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:e.jsxs(N,{to:"/snf/address",children:[e.jsx(b,{className:"size-4 mr-2"}),"Add New Address"]})})})]})]})};export{O as A,K as s};
