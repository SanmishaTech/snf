var fe=Object.defineProperty;var xe=(d,t,e)=>t in d?fe(d,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[t]=e;var N=(d,t,e)=>xe(d,typeof t!="symbol"?t+"":t,e);import{O as we,r as u,j as r,b as Ee,S as ae,X as be,L as G,Q as Ne,U as Ie,V as Pe,W as Se,Y as Ae,o as V,T as ve,M as je,P as De,B as M,Z as K,_ as z,l as W,$ as Y,a0 as Q,I as _e,z as H,C as Oe,a1 as J,a2 as X,a3 as ke,a4 as Le}from"./index-Bj0Kxnel.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Re=we("locate-fixed",Ce);class Te{constructor(){N(this,"DEFAULT_OPTIONS",{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5});N(this,"GEOCODING_API_URL","https://api.opencagedata.com/geocode/v1/json");N(this,"GEOCODING_API_KEY","");N(this,"KNOWN_AREA_PINCODES",{"19.0_72.8":"400001","19.1_72.8":"400050","19.2_72.9":"400099","19.3_72.8":"421202","19.4_73.0":"421301","19.2_73.0":"421202","19.23_73.0":"421202","19.21_73.02":"421202"})}isGeolocationSupported(){return"geolocation"in navigator&&typeof navigator.geolocation=="object"}async checkPermissionStatus(){if(!this.isGeolocationSupported())return"denied";try{return"permissions"in navigator?(await navigator.permissions.query({name:"geolocation"})).state:await this.checkPermissionByPosition()}catch(t){return console.warn("Error checking geolocation permission:",t),"prompt"}}async requestPermission(){if(!this.isGeolocationSupported())throw{type:"PERMISSION_DENIED",message:"Geolocation is not supported in your browser",code:"GEOLOCATION_NOT_SUPPORTED"};try{return"permissions"in navigator?(await navigator.permissions.query({name:"geolocation"})).state:(await this.getCurrentPosition(),"granted")}catch(t){return t.code===1?"denied":"prompt"}}async requestLocationWithExplanation(t){if(!this.isGeolocationSupported())throw{type:"PERMISSION_DENIED",message:"Geolocation is not supported in your browser. Please enter your pincode manually.",code:1,recoverable:!0};try{const e=await this.getCurrentPosition(t);return await this.reverseGeocode(e.coords.latitude,e.coords.longitude)}catch(e){const a=e;switch(a.code){case 1:throw{type:"PERMISSION_DENIED",message:"Location access was denied. Please enable location access or enter your pincode manually.",code:"PERMISSION_DENIED",details:a};case 2:throw{type:"POSITION_UNAVAILABLE",message:"Unable to retrieve your location. Please check your device settings or enter your pincode manually.",code:"POSITION_UNAVAILABLE",details:a};case 3:throw{type:"TIMEOUT",message:"Location request timed out. Please try again or enter your pincode manually.",code:"TIMEOUT",details:a};default:throw{type:"TIMEOUT",message:"An unknown error occurred while getting your location. Please try again or enter your pincode manually.",code:3,recoverable:!0,details:a}}}}getCurrentPosition(t){return new Promise((e,a)=>{navigator.geolocation.getCurrentPosition(e,n=>a(n),{...this.DEFAULT_OPTIONS,...t})})}async checkPermissionByPosition(){try{return await this.getCurrentPosition({timeout:2e3}),"granted"}catch(t){return t.code===1?"denied":"prompt"}}async reverseGeocode(t,e){try{if(!this.GEOCODING_API_KEY){console.warn("GEOCODING_API_KEY not configured. Using fallback pincode mapping.");const i=this.generateMockPincode(t,e);let p="Unknown",x="Maharashtra",m="Unknown Address";return i==="421202"||i==="421201"||i==="421203"?(p="Dombivli",m="Dombivli, Thane"):i==="421301"?(p="Kalyan",m="Kalyan, Thane"):i.startsWith("400")&&(p="Mumbai",m="Mumbai"),{latitude:t,longitude:e,pincode:i,city:p,state:x,country:"India",address:m}}const a=new URL(this.GEOCODING_API_URL);a.searchParams.append("q",`${t}+${e}`),a.searchParams.append("key",this.GEOCODING_API_KEY),a.searchParams.append("limit","1");const n=await fetch(a.toString());if(!n.ok)throw new Error(`Geocoding API request failed: ${n.status}`);const s=await n.json();if(s.results.length===0)throw new Error("No results found for the given coordinates");const o=s.results[0],c=o.components;return{latitude:t,longitude:e,pincode:c.postcode||this.generateMockPincode(t,e),city:c.city||c.town||c.village||"Unknown",state:c.state||"Unknown",country:c.country||"India",address:o.formatted||"Unknown Address"}}catch(a){return console.warn("Reverse geocoding failed, using fallback:",a),{latitude:t,longitude:e,pincode:this.generateMockPincode(t,e),city:"Unknown",state:"Unknown",country:"India",address:"Unknown Address"}}}generateMockPincode(t,e){const a=`${t.toFixed(1)}_${e.toFixed(1)}`;if(this.KNOWN_AREA_PINCODES[a])return console.log(`Using known area pincode for ${a}: ${this.KNOWN_AREA_PINCODES[a]}`),this.KNOWN_AREA_PINCODES[a];if(t>=19.15&&t<=19.35&&e>=72.85&&e<=73.15)return console.log("Detected Dombivli/Kalyan area, returning 421202"),"421202";if(t>=18.9&&t<=19.5&&e>=72.7&&e<=73.2)return console.log("Detected Mumbai metropolitan region, returning default Mumbai pincode"),"400001";console.warn("No known area match found for coordinates, generating mock pincode");const n=Math.abs(t).toString().replace(".",""),s=Math.abs(e).toString().replace(".","");let c=(n+s).substring(0,6);for(;c.length<6;)c+="0";return c}async getPositionFromPincode(t){if(!t||!/^\d{6}$/.test(t))throw{type:"INVALID_PINCODE",message:"Please enter a valid 6-digit pincode",code:"INVALID_PINCODE"};try{if(!this.GEOCODING_API_KEY){console.warn("GEOCODING_API_KEY not configured. Using fallback for known pincodes.");const i={421202:{latitude:19.217,longitude:73.025,pincode:"421202",city:"Dombivli",state:"Maharashtra",country:"India",address:"Dombivli East, Thane"},421201:{latitude:19.218,longitude:73.023,pincode:"421201",city:"Dombivli",state:"Maharashtra",country:"India",address:"Dombivli West, Thane"},421301:{latitude:19.243,longitude:73.129,pincode:"421301",city:"Kalyan",state:"Maharashtra",country:"India",address:"Kalyan, Thane"},400001:{latitude:18.9388,longitude:72.8354,pincode:"400001",city:"Mumbai",state:"Maharashtra",country:"India",address:"Mumbai GPO"}};return i[t]?(console.log(`Using known mapping for pincode ${t}`),i[t]):{latitude:this.generateMockLatitude(t),longitude:this.generateMockLongitude(t),pincode:t,city:"Unknown",state:"Maharashtra",country:"India",address:`Pincode ${t}`}}const e=new URL(this.GEOCODING_API_URL);e.searchParams.append("q",t),e.searchParams.append("countrycode","in"),e.searchParams.append("key",this.GEOCODING_API_KEY),e.searchParams.append("limit","1");const a=await fetch(e.toString());if(!a.ok)throw new Error(`Geocoding API request failed: ${a.status}`);const n=await a.json();if(n.results.length===0)throw{type:"INVALID_PINCODE",message:"No location found for the given pincode. Please check and try again.",code:"PINCODE_NOT_FOUND"};const s=n.results[0],o=s.geometry,c=s.components;return{latitude:o.lat,longitude:o.lng,pincode:t,city:c.city||c.town||c.village||"Unknown",state:c.state||"Unknown",country:c.country||"India",address:s.formatted||`Pincode ${t}`}}catch(e){if(e.type==="INVALID_PINCODE")throw e;return console.warn("Forward geocoding failed, using fallback:",e),{latitude:this.generateMockLatitude(t),longitude:this.generateMockLongitude(t),pincode:t,city:"Unknown",state:"Unknown",country:"India",address:`Pincode ${t}`}}}generateMockLatitude(t){return 8+parseInt(t.substring(0,3))/1e3*10}generateMockLongitude(t){return 68+parseInt(t.substring(3,6))/1e3*20}watchPosition(t,e,a){if(!this.isGeolocationSupported())return e&&e({type:"PERMISSION_DENIED",message:"Geolocation is not supported in your browser",code:1,recoverable:!0}),()=>{};const n=navigator.geolocation.watchPosition(async s=>{try{const o=await this.reverseGeocode(s.coords.latitude,s.coords.longitude);t(o)}catch(o){e&&e(o)}},s=>{if(e){const o={type:"TIMEOUT",message:s.message,code:s.code,recoverable:!0,details:s};e(o)}},{...this.DEFAULT_OPTIONS,...a});return()=>{navigator.geolocation.clearWatch(n)}}calculateDistance(t,e,a,n){const o=this.toRadians(a-t),c=this.toRadians(n-e),i=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.toRadians(t))*Math.cos(this.toRadians(a))*Math.sin(c/2)*Math.sin(c/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}toRadians(t){return t*(Math.PI/180)}}const T=new Te;class Me{constructor(){N(this,"API_BASE_URL","/api");N(this,"CACHE_TTL",30*60*1e3)}async getDepotByPincode(t){try{const e=await fetch(`${this.API_BASE_URL}/public/area-masters/by-pincode/${t}`);if(!e.ok){if(e.status===404)return null;throw new Error(`API request failed: ${e.status}`)}const a=await e.json();return!a.success||!a.data||a.data.length===0?null:a.data[0].depot||null}catch(e){throw console.error("Error fetching depot by pincode:",e),e}}async getAllDepotsForPincode(t){try{const e=await fetch(`${this.API_BASE_URL}/public/area-masters/by-pincode/${t}`);if(!e.ok){if(e.status===404)return[];throw new Error(`API request failed: ${e.status}`)}const a=await e.json();return!a.success||!a.data?[]:a.data.filter(s=>s.depot).map(s=>s.depot).filter((s,o,c)=>c.findIndex(i=>i.id===s.id)===o)}catch(e){throw console.error("Error fetching all depots for pincode:",e),e}}async validateServiceAvailability(t){try{const e=await fetch(`${this.API_BASE_URL}/public/area-masters/by-pincode/${t}`);if(!e.ok){if(e.status===404)return{isAvailable:!1,supportedProducts:[]};throw new Error(`API request failed: ${e.status}`)}const a=await e.json();if(!a.success||!a.data||a.data.length===0)return{isAvailable:!1};const s=a.data.filter(o=>o.depot).map(o=>o.depot).filter((o,c,i)=>i.findIndex(p=>p.id===o.id)===c);return{isAvailable:s.length>0,depot:s.length>0?s[0]:void 0,estimatedDeliveryTime:s.length>0?"Same day delivery":void 0,deliveryCharges:s.length>0?0:void 0,minimumOrderAmount:s.length>0?100:void 0,message:s.length>0?"Service available in your area":"Service not available in your area"}}catch(e){return console.error("Error validating service availability:",e),{isAvailable:!1,message:"Error checking service availability"}}}async getOnlineDepot(){try{const t=await fetch(`${this.API_BASE_URL}/public/depots/online`);if(!t.ok)throw new Error(`API request failed: ${t.status}`);const e=await t.json();return!e.success||!e.data||e.data.length===0?null:e.data[0]}catch(t){return console.error("Error fetching online depot:",t),null}}async getOptimalDepot(t){if(t)try{const e=await this.getDepotByPincode(t);if(e)return e}catch(e){console.warn("Failed to get depot for pincode, falling back to online depot:",e)}try{const e=await this.getOnlineDepot();if(e)return e}catch(e){console.error("Failed to get online depot:",e)}return null}async doesDepotServePincode(t,e){try{const a=await fetch(`${this.API_BASE_URL}/public/area-masters/by-pincode/${e}`);if(!a.ok)return!1;const n=await a.json();return!n.success||!n.data?!1:n.data.some(s=>s.depotId===t)}catch(a){return console.error("Error checking if depot serves pincode:",a),!1}}async getAllDepots(){try{const t=await fetch(`${this.API_BASE_URL}/public/depots`);if(!t.ok)throw new Error(`API request failed: ${t.status}`);const e=await t.json();return!e.success||!e.data?[]:e.data}catch(t){return console.error("Error fetching all depots:",t),[]}}async getDepotById(t){try{const e=await fetch(`${this.API_BASE_URL}/public/depots/${t}`);if(!e.ok){if(e.status===404)return null;throw new Error(`API request failed: ${e.status}`)}const a=await e.json();return!a.success||!a.data?null:a.data}catch(e){return console.error("Error fetching depot by ID:",e),null}}async getDepotsByLocation(t,e){try{const a=await fetch(`${this.API_BASE_URL}/public/depots/nearby?lat=${t}&lng=${e}`);if(!a.ok)throw new Error(`API request failed: ${a.status}`);const n=await a.json();return!n.success||!n.data?[]:n.data}catch(a){return console.error("Error fetching depots by location:",a),[]}}getCacheKey(t){return`depot_mapping_${t}`}getCachedDepot(t){try{const e=this.getCacheKey(t),a=localStorage.getItem(e);if(!a)return null;const{depot:n,timestamp:s}=JSON.parse(a);return Date.now()-s>this.CACHE_TTL?(localStorage.removeItem(e),null):n}catch(e){return console.warn("Error reading cached depot:",e),null}}cacheDepot(t,e){try{const a=this.getCacheKey(t),n={depot:e,timestamp:Date.now()};localStorage.setItem(a,JSON.stringify(n))}catch(a){console.warn("Error caching depot:",a)}}clearCachedDepot(t){try{const e=this.getCacheKey(t);localStorage.removeItem(e)}catch(e){console.warn("Error clearing cached depot:",e)}}}const D=new Me;class Ue{constructor(){N(this,"API_BASE_URL","https://www.indraai.in");N(this,"DEFAULT_TIMEOUT",1e4);N(this,"MAX_RETRIES",2)}async getProducts(t){try{const e=new URL(`${this.API_BASE_URL}/api/products/public`);t&&e.searchParams.append("depotId",t.toString());const a=await this.fetchWithRetry(e.toString());if(!a.ok)throw new Error(`API request failed: ${a.status}`);const n=await a.json();if(!n.success||!n.data)return[];if(Array.isArray(n.data)){console.log("Raw products data:",n.data);const s=n.data;return console.log("Filtered non-dairy products:",s),console.log("Total products:",n.data.length,"Non-dairy:",s.length),s}else if(n.data.products&&Array.isArray(n.data.products)){console.log("Raw products data:",n.data.products);const s=n.data.products;return console.log("Filtered non-dairy products:",s),console.log("Total products:",n.data.products.length,"Non-dairy:",s.length),s}return[]}catch(e){throw console.error("Error fetching products:",e),e}}async getProductVariants(t,e){try{const a=new URL(`${this.API_BASE_URL}/api/products/public`);a.searchParams.append("depotId",e.toString());const n=await this.fetchWithRetry(a.toString());if(!n.ok){if(n.status===404)return[];throw new Error(`API request failed: ${n.status}`)}const s=await n.json();if(!s.success||!s.data)return[];let o=[],c=null;if(Array.isArray(s.data)){const i=s.data.find(p=>p.id===t);i&&i.isDairyProduct===!1&&i.variants&&Array.isArray(i.variants)&&(c=i,o=i.variants)}else if(s.data.products&&Array.isArray(s.data.products)){const i=s.data.products.find(p=>p.id===t);i&&i.variants&&Array.isArray(i.variants)&&(c=i,o=i.variants)}return c?o.map(i=>({id:i.id,depotId:e,productId:t,name:i.name,hsnCode:i.hsnCode,minimumQty:i.minimumQty||1,closingQty:i.closingQty||0,notInStock:i.notInStock||!1,isHidden:i.isHidden||!1,buyOncePrice:i.buyOncePrice?parseFloat(i.buyOncePrice):void 0,price15Day:i.price15Day?parseFloat(i.price15Day):void 0,price1Month:i.price1Month?parseFloat(i.price1Month):void 0,price3Day:i.price3Day?parseFloat(i.price3Day):void 0,price7Day:i.price7Day?parseFloat(i.price7Day):void 0,mrp:parseFloat(i.mrp)||0,purchasePrice:i.purchasePrice?parseFloat(i.purchasePrice):void 0,createdAt:new Date(i.createdAt||Date.now()),updatedAt:new Date(i.updatedAt||Date.now()),depot:{id:e,name:"Depot",address:"",isOnline:!0},product:c?{id:c.id,name:c.name,description:c.description,attachmentUrl:c.attachmentUrl,url:c.url,isDairyProduct:c.isDairyProduct,maintainStock:c.maintainStock,categoryId:c.categoryId,category:c.category,createdAt:new Date(c.createdAt||Date.now()),updatedAt:new Date(c.updatedAt||Date.now())}:{id:t,name:"Product",description:"",isDairyProduct:!1,maintainStock:!1,createdAt:new Date,updatedAt:new Date}})):[]}catch(a){throw console.error("Error fetching product variants:",a),a}}async getDepotVariants(t){try{const e=new URL(`${this.API_BASE_URL}/api/products/public`);e.searchParams.append("depotId",t.toString());const a=await this.fetchWithRetry(e.toString());if(!a.ok){if(a.status===404)return[];throw new Error(`API request failed: ${a.status}`)}const n=await a.json();if(!n.success||!n.data)return[];let s=[];return Array.isArray(n.data)?n.data.forEach(o=>{if(o.variants&&Array.isArray(o.variants)){const c=o.variants.map(i=>({...i,product:{id:o.id,name:o.name,description:o.description,attachmentUrl:o.attachmentUrl,url:o.url,isDairyProduct:o.isDairyProduct,maintainStock:o.maintainStock,categoryId:o.categoryId,category:o.category,createdAt:o.createdAt,updatedAt:o.updatedAt}}));s=[...s,...c]}}):n.data.products&&Array.isArray(n.data.products)&&n.data.products.forEach(o=>{if(o.variants&&Array.isArray(o.variants)){const c=o.variants.map(i=>({...i,product:{id:o.id,name:o.name,description:o.description,attachmentUrl:o.attachmentUrl,url:o.url,isDairyProduct:o.isDairyProduct,maintainStock:o.maintainStock,categoryId:o.categoryId,category:o.category,createdAt:o.createdAt,updatedAt:o.updatedAt}}));s=[...s,...c]}}),s.map(o=>{var c;return{id:o.id,depotId:t,productId:o.productId||((c=o.product)==null?void 0:c.id),name:o.name,hsnCode:o.hsnCode,minimumQty:o.minimumQty||1,closingQty:o.closingQty||0,notInStock:o.notInStock||!1,isHidden:o.isHidden||!1,buyOncePrice:o.buyOncePrice?parseFloat(o.buyOncePrice):void 0,price15Day:o.price15Day?parseFloat(o.price15Day):void 0,price1Month:o.price1Month?parseFloat(o.price1Month):void 0,price3Day:o.price3Day?parseFloat(o.price3Day):void 0,price7Day:o.price7Day?parseFloat(o.price7Day):void 0,mrp:parseFloat(o.mrp)||0,purchasePrice:o.purchasePrice?parseFloat(o.purchasePrice):void 0,createdAt:new Date(o.createdAt||Date.now()),updatedAt:new Date(o.updatedAt||Date.now()),depot:o.depot,product:o.product}})}catch(e){throw console.error("Error fetching depot variants:",e),e}}async getAllDepotVariants(){try{const t=new URL(`${this.API_BASE_URL}/public/depot-variants`),e=await this.fetchWithRetry(t.toString());if(!e.ok)throw new Error(`API request failed: ${e.status}`);const a=await e.json();if(!a.success||!a.data)return[];let n=[];return Array.isArray(a.data)?n=a.data:a.data.depot&&a.data.products&&a.data.forEach(s=>{s.products&&s.products.forEach(o=>{o.variants&&(n=[...n,...o.variants])})}),n.map(s=>{var o,c;return{id:s.id,depotId:s.depotId||((o=s.depot)==null?void 0:o.id),productId:s.productId||((c=s.product)==null?void 0:c.id),name:s.name,hsnCode:s.hsnCode,minimumQty:s.minimumQty||1,closingQty:s.closingQty||0,notInStock:s.notInStock||!1,isHidden:s.isHidden||!1,buyOncePrice:s.buyOncePrice?parseFloat(s.buyOncePrice):void 0,price15Day:s.price15Day,price1Month:s.price1Month,price3Day:s.price3Day,price7Day:s.price7Day,mrp:s.mrp||s.price||0,purchasePrice:s.purchasePrice,createdAt:s.createdAt||new Date,updatedAt:s.updatedAt||new Date,depot:s.depot,product:s.product}})}catch(t){throw console.error("Error fetching all depot variants:",t),t}}async getPublicProducts(){try{const t=new URL(`${this.API_BASE_URL}/api/products/public`),e=await this.fetchWithRetry(t.toString());if(!e.ok)throw new Error(`API request failed: ${e.status}`);const a=await e.json();return!a.success||!a.data?[]:a.data}catch(t){throw console.error("Error fetching public products:",t),t}}async getProductsByCategory(t,e){try{const a=new URL(`${this.API_BASE_URL}/api/products/public`);a.searchParams.append("categoryId",t.toString()),e&&a.searchParams.append("depotId",e.toString());const n=await this.fetchWithRetry(a.toString());if(!n.ok)throw new Error(`API request failed: ${n.status}`);const s=await n.json();return!s.success||!s.data?[]:s.data.filter(o=>o&&o.isDairyProduct!==!0)}catch(a){throw console.error("Error fetching products by category:",a),a}}async searchProducts(t,e){try{const a=new URL(`${this.API_BASE_URL}/api/products/public`);a.searchParams.append("search",t),e&&a.searchParams.append("depotId",e.toString());const n=await this.fetchWithRetry(a.toString());if(!n.ok)throw new Error(`API request failed: ${n.status}`);const s=await n.json();return!s.success||!s.data?[]:s.data.filter(o=>o&&o.isDairyProduct===!1)}catch(a){throw console.error("Error searching products:",a),a}}async getProductById(t){try{const e=new URL(`${this.API_BASE_URL}/api/products/${t}`),a=await this.fetchWithRetry(e.toString());if(!a.ok){if(a.status===404)return null;throw new Error(`API request failed: ${a.status}`)}const n=await a.json();if(n&&typeof n=="object"){if(n.success&&n.data){const s=n.data;return s&&s.isDairyProduct!==!0?s:null}else if(n.id){const s=n;return s&&s.isDairyProduct!==!0?s:null}}return null}catch(e){throw console.error("Error fetching product by ID:",e),e}}async batchGetProducts(t){if(t.length===0)return[];try{const e=new URL(`${this.API_BASE_URL}/api/products/batch`),a=await this.fetchWithRetry(e.toString(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productIds:t})});if(!a.ok)throw new Error(`API request failed: ${a.status}`);const n=await a.json();return!n.success||!n.data?[]:n.data}catch(e){throw console.error("Error batch fetching products:",e),e}}async fetchWithRetry(t,e){let a=null;for(let n=0;n<=this.MAX_RETRIES;n++)try{const s=new AbortController,o=setTimeout(()=>s.abort(),this.DEFAULT_TIMEOUT),c=await fetch(t,{...e,signal:s.signal});return clearTimeout(o),c}catch(s){if(a=s,n===this.MAX_RETRIES)break;const o=Math.pow(2,n)*1e3;await new Promise(c=>setTimeout(c,o))}throw a||new Error("Max retries exceeded")}extractUnitFromName(t){const e=[/(\d+)\s*(ml|ML|milliliter|milliliters)/i,/(\d+)\s*(l|L|liter|liters)/i,/(\d+)\s*(g|G|gram|grams)/i,/(\d+)\s*(kg|KG|kilogram|kilograms)/i,/(\d+)\s*(pcs|PC|pieces)/i,/(\d+)\s*(pack|Pack|PACK)/i];for(const a of e){const n=t.match(a);if(n)return n[2].toLowerCase()}return t.toLowerCase().includes("500ml")?"500ml":t.toLowerCase().includes("1l")?"1l":t.toLowerCase().includes("1kg")?"1kg":t.toLowerCase().includes("500g")?"500g":"unit"}async getCategories(){try{const t=new URL(`${this.API_BASE_URL}/api/admin/categories/public/AllCategories`),e=await this.fetchWithRetry(t.toString());if(!e.ok)throw new Error(`API request failed: ${e.status}`);const a=await e.json();return!a.success||!a.data?[]:a.data}catch(t){throw console.error("Error fetching categories:",t),t}}}const Z=new Ue,se={currentDepot:null,userLocation:null,products:[],depotVariants:[],isLoading:!1,error:null,isLocationPermissionGranted:!1,serviceAvailability:null};function $e(d,t){switch(t.type){case"SET_DEPOT":return{...d,currentDepot:t.payload,error:null};case"SET_LOCATION":return{...d,userLocation:t.payload,error:null};case"SET_PRODUCTS":return{...d,products:t.payload,isLoading:!1};case"SET_DEPOT_VARIANTS":return{...d,depotVariants:t.payload,isLoading:!1};case"SET_LOADING":return{...d,isLoading:t.payload};case"SET_ERROR":return{...d,error:t.payload,isLoading:!1};case"SET_LOCATION_PERMISSION":return{...d,isLocationPermissionGranted:t.payload};case"SET_SERVICE_AVAILABILITY":return{...d,serviceAvailability:t.payload};case"UPDATE_PRODUCT_VARIANTS":return{...d,depotVariants:d.depotVariants.map(e=>e.product.id===t.payload.productId&&t.payload.variants.find(a=>a.id===e.id)||e)};case"RESET_STATE":return se;default:return d}}const oe=u.createContext(void 0),Ye=({children:d})=>{const[t,e]=u.useReducer($e,se);u.useEffect(()=>{a()},[]);const a=u.useCallback(async()=>{try{e({type:"SET_LOADING",payload:!0});const c=await T.checkPermissionStatus();if(e({type:"SET_LOCATION_PERMISSION",payload:c==="granted"}),c==="granted"){const i=await T.requestLocationWithExplanation();e({type:"SET_LOCATION",payload:i});const p=await D.getOptimalDepot(i.pincode);if(p){e({type:"SET_DEPOT",payload:p});const x=await D.validateServiceAvailability(i.pincode);e({type:"SET_SERVICE_AVAILABILITY",payload:x}),await n(p.id)}else{const x=await D.getOnlineDepot();x?(e({type:"SET_DEPOT",payload:x}),await n(x.id)):e({type:"SET_ERROR",payload:{type:"DEPOT_NOT_FOUND",message:"No depot found for your location. Please try again later.",code:"DEPOT_NOT_FOUND"}})}}else if(c==="prompt")try{const i=await T.requestLocationWithExplanation();e({type:"SET_LOCATION",payload:i}),e({type:"SET_LOCATION_PERMISSION",payload:!0});const p=await D.getOptimalDepot(i.pincode);p&&(e({type:"SET_DEPOT",payload:p}),await n(p.id))}catch(i){e({type:"SET_ERROR",payload:i});const x=await D.getOnlineDepot();x&&(e({type:"SET_DEPOT",payload:x}),await n(x.id))}else{const i=await D.getOnlineDepot();i?(e({type:"SET_DEPOT",payload:i}),await n(i.id)):e({type:"SET_ERROR",payload:{type:"DEPOT_NOT_FOUND",message:"Location access denied and no online depot available.",code:"LOCATION_DENIED"}})}}catch(c){console.error("Error initializing location and depot:",c),e({type:"SET_ERROR",payload:{type:"API_ERROR",message:"Failed to initialize location services. Please try again.",details:c}})}finally{e({type:"SET_LOADING",payload:!1})}},[]),n=u.useCallback(async c=>{try{e({type:"SET_LOADING",payload:!0});const i=await Z.getProducts(c);e({type:"SET_PRODUCTS",payload:i});const p=await Z.getDepotVariants(c);e({type:"SET_DEPOT_VARIANTS",payload:p})}catch(i){console.error("Error loading products and variants:",i),e({type:"SET_ERROR",payload:{type:"API_ERROR",message:"Failed to load products. Please try again.",details:i}})}finally{e({type:"SET_LOADING",payload:!1})}},[]),s={setDepot:u.useCallback(async c=>{e({type:"SET_DEPOT",payload:c}),await n(c.id)},[n]),setLocation:u.useCallback(async c=>{e({type:"SET_LOCATION",payload:c});try{const i=await D.getOptimalDepot(c.pincode);i&&(e({type:"SET_DEPOT",payload:i}),await n(i.id))}catch(i){console.error("Error setting location:",i),e({type:"SET_ERROR",payload:{type:"API_ERROR",message:"Failed to set location. Please try again.",details:i}})}},[n]),refreshPricing:u.useCallback(async()=>{t.currentDepot&&await n(t.currentDepot.id)},[t.currentDepot,n]),setError:u.useCallback(c=>{e({type:"SET_ERROR",payload:c})},[]),setLoading:u.useCallback(c=>{e({type:"SET_LOADING",payload:c})},[]),setLocationPermission:u.useCallback(c=>{e({type:"SET_LOCATION_PERMISSION",payload:c})},[]),setServiceAvailability:u.useCallback(c=>{e({type:"SET_SERVICE_AVAILABILITY",payload:c})},[])},o={state:t,actions:s};return r.jsx(oe.Provider,{value:o,children:d})},Fe=()=>{const d=u.useContext(oe);if(d===void 0)throw new Error("usePricing must be used within a PricingProvider");return d},Ge=(d=5)=>{const t="snf_recent_searches",[e,a]=u.useState(()=>{try{const c=localStorage.getItem(t);return c?JSON.parse(c):[]}catch{return[]}});return{recent:e,save:c=>{if(!c.trim())return;const i=[c.trim(),...e.filter(p=>p!==c.trim())].slice(0,d);a(i),localStorage.setItem(t,JSON.stringify(i))},remove:c=>{const i=e.filter(p=>p!==c);a(i),localStorage.setItem(t,JSON.stringify(i))},clear:()=>{a([]),localStorage.removeItem(t)}}},ee=()=>{const[d,t]=u.useState(!1),[e,a]=u.useState(""),[n,s]=u.useState(!1),[o,c]=u.useState(-1),[i,p]=u.useState("relevance"),[x,m]=u.useState("all"),h=u.useRef(null),E=u.useRef(null),{recent:v,save:j,remove:y,clear:w}=Ge(),R=Ee(),{state:_}=Fe(),ie=u.useMemo(()=>{const l=new Set;return _.products.forEach(g=>{var I;const $=(I=g==null?void 0:g.category)==null?void 0:I.name;$&&l.add($)}),["all",...Array.from(l)]},[_.products]),[U,ce]=u.useState("");u.useEffect(()=>{const l=setTimeout(()=>ce(e),300);return()=>clearTimeout(l)},[e]);const S=u.useMemo(()=>{const l=U.trim().toLowerCase(),g=new Map;for(const f of _.depotVariants){const b=g.get(f.productId)||[];b.push(f),g.set(f.productId,b)}let I=_.products.map(f=>{var B;const O=(g.get(f.id)||[]).filter(P=>!P.isHidden&&!P.notInStock);let A=0,L,F=Number.POSITIVE_INFINITY;for(const P of O){const C=Number(P.buyOncePrice??P.mrp??0);isFinite(C)&&C>0&&C<F&&(F=C,A=C,L=typeof P.mrp=="number"&&isFinite(P.mrp)&&P.mrp>0?P.mrp:void 0)}(!isFinite(A)||A===0)&&(A=0,L=void 0);const ye=f.attachmentUrl?`https://www.indraai.in${f.attachmentUrl}`:void 0,ge=(B=f==null?void 0:f.category)==null?void 0:B.name;return{id:f.id,name:f.name,description:f.description,imageUrl:ye,category:ge,price:A,mrp:L}}).filter(f=>{const b=!l||f.name.toLowerCase().includes(l)||(f.description||"").toLowerCase().includes(l)||(f.category||"").toLowerCase().includes(l),O=x==="all"||f.category===x;return b&&O});switch(i){case"price_asc":I=I.sort((f,b)=>(f.price||0)-(b.price||0));break;case"price_desc":I=I.sort((f,b)=>(b.price||0)-(f.price||0));break;case"relevance":default:{I=I.sort((f,b)=>{const O=f.name.toLowerCase(),A=b.name.toLowerCase(),L=O.startsWith(l)?2:O.includes(l)?1:0;return(A.startsWith(l)?2:A.includes(l)?1:0)-L});break}}return I.slice(0,10)},[U,x,i,_.products,_.depotVariants]);u.useEffect(()=>{if(!e){s(!1);return}s(!0);const l=setTimeout(()=>s(!1),320);return()=>clearTimeout(l)},[U]),u.useEffect(()=>{const l=g=>{E.current&&!E.current.contains(g.target)&&h.current&&!h.current.contains(g.target)&&(t(!1),c(-1))};return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[]);const le=l=>{console.log("analytics.impressions",{ids:l,query:e})},q=(l,g)=>{console.log("analytics.click",{id:l,position:g,query:e})};u.useEffect(()=>{d&&S.length&&le(S.map(l=>l.id))},[d,S]);const de=()=>t(!0),ue=l=>{a(l.target.value),t(!0)},pe=l=>{if(d||t(!0),l.key==="ArrowDown")l.preventDefault(),c(g=>Math.min(g+1,S.length-1));else if(l.key==="ArrowUp")l.preventDefault(),c(g=>Math.max(g-1,0));else if(l.key==="Enter"){if(o>=0&&o<S.length){const g=S[o];j(e),q(g.id,o),R(`/snf/product/${g.id}`),t(!1),c(-1)}}else l.key==="Escape"&&(t(!1),c(-1))},me=()=>a(""),he=l=>{const g=(l.price||0).toFixed(2);return l.mrp&&l.mrp>l.price?r.jsxs("span",{className:"text-sm",children:[r.jsxs("span",{className:"font-medium",children:["₹",g]}),r.jsxs("span",{className:"ml-2 text-xs line-through text-muted-foreground",children:["₹",l.mrp.toFixed(2)]})]}):r.jsxs("span",{className:"text-sm font-medium",children:["₹",g]})};return r.jsxs("div",{className:"relative w-full max-w-xl",children:[r.jsx("div",{className:"relative",children:r.jsxs("div",{className:"flex items-center bg-gray-100 rounded-full px-4 py-2",children:[r.jsx(ae,{className:"h-5 w-5 text-gray-500 mr-2","aria-hidden":"true"}),r.jsx("input",{ref:h,type:"search",role:"combobox","aria-autocomplete":"list","aria-expanded":d,"aria-controls":"search-suggestion-list","aria-activedescendant":o>=0?`search-option-${o}`:void 0,placeholder:"Search products...",className:"bg-transparent border-none focus:outline-none w-60",value:e,onChange:ue,onFocus:de,onKeyDown:pe}),e&&r.jsx("button",{onClick:me,className:"ml-2 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:r.jsx(be,{className:"h-4 w-4"})})]})}),d&&r.jsxs("div",{ref:E,id:"search-suggestion-list",role:"listbox",className:"absolute left-0 right-0 mt-2 bg-white rounded-lg shadow-lg z-[60] max-h-[460px] overflow-y-auto border",children:[r.jsxs("div",{className:"p-2 border-b flex items-center gap-2",children:[r.jsxs("select",{className:"text-xs border rounded px-2 py-1",value:i,onChange:l=>p(l.target.value),"aria-label":"Sort results",children:[r.jsx("option",{value:"relevance",children:"Relevance"}),r.jsx("option",{value:"price_asc",children:"Price: Low to High"}),r.jsx("option",{value:"price_desc",children:"Price: High to Low"})]}),r.jsx("select",{className:"text-xs border rounded px-2 py-1 ml-auto",value:x,onChange:l=>m(l.target.value),"aria-label":"Filter by category",children:ie.map(l=>r.jsx("option",{value:l,children:l},l))})]}),r.jsxs("div",{className:"p-2",children:[!e&&v.length>0&&r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[r.jsx("h3",{className:"text-xs font-semibold text-gray-500",children:"RECENT SEARCHES"}),r.jsx("button",{className:"text-xs text-blue-600",onClick:w,children:"Clear all"})]}),v.map(l=>r.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 hover:bg-gray-50 rounded",children:[r.jsx("button",{className:"text-sm text-left truncate flex-1",onClick:()=>a(l),children:l}),r.jsx("button",{className:"text-xs text-muted-foreground ml-2",onClick:()=>y(l),children:"Remove"})]},l))]}),n&&r.jsx("div",{className:"flex justify-center items-center py-6",children:r.jsx("div",{className:"text-sm text-muted-foreground",children:"Searching…"})}),!n&&e&&S.length===0&&r.jsxs("div",{className:"px-3 py-6 text-center text-sm text-muted-foreground",children:["No products found for “",e,"”. Try a different term or adjust filters."]}),!n&&S.map((l,g)=>r.jsxs(G,{to:`/snf/product/${l.id}`,role:"option",id:`search-option-${g}`,"aria-selected":o===g,onClick:()=>{j(e),q(l.id,g),t(!1),c(-1)},className:`flex gap-3 px-3 py-2 rounded-md hover:bg-gray-50 focus:bg-gray-50 outline-none ${o===g?"ring-2 ring-primary":""}`,children:[r.jsx("div",{className:"w-20 h-16 rounded border overflow-hidden bg-muted/20 grid place-items-center",children:l.imageUrl?r.jsx("img",{src:l.imageUrl,alt:l.name,width:80,height:60,className:"w-full h-full object-cover",loading:"lazy"}):r.jsx("span",{className:"text-[10px] text-muted-foreground",children:"No image"})}),r.jsxs("div",{className:"min-w-0 flex-1",children:[r.jsx("div",{className:"text-sm font-medium truncate",children:l.name}),l.category&&r.jsx("div",{className:"text-xs text-muted-foreground truncate",children:l.category}),r.jsx("div",{className:"mt-1 flex items-center gap-2",children:he(l)})]})]},l.id))]})]})]})};class k{static getCurrentLocation(){try{const t=localStorage.getItem(this.STORAGE_KEY);return t?JSON.parse(t):null}catch(t){return console.warn("Failed to parse delivery location from storage:",t),null}}static setCurrentLocation(t){try{localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}catch(e){console.warn("Failed to store delivery location:",e)}}static clearCurrentLocation(){localStorage.removeItem(this.STORAGE_KEY)}static async getDepotForPincode(t){try{const e=await Ne(t);if(e.length===0)return null;const a=e.find(s=>s.depot);if(!a||!a.depot)return null;const n={pincode:t,depotId:a.depot.id.toString(),depotName:a.depot.name,areaId:a.id,areaName:a.name};return this.setCurrentLocation(n),n}catch(e){return console.error("Failed to get depot for pincode:",e),null}}static async updateLocationByPincode(t){return this.clearCurrentLocation(),!t||!/^\d{6}$/.test(t)?null:await this.getDepotForPincode(t)}static getCurrentDepotId(){const t=this.getCurrentLocation();return(t==null?void 0:t.depotId)||null}static hasDeliveryLocation(){const t=this.getCurrentLocation();return!!(t&&t.pincode&&t.depotId)}static async migrateFromOldPincodeStorage(){if(this.hasDeliveryLocation())return;const t=localStorage.getItem("snf.pincode");t&&/^\d{6}$/.test(t)&&(await this.updateLocationByPincode(t),localStorage.removeItem("snf.pincode"))}}N(k,"STORAGE_KEY","snf.deliveryLocation");const qe={items:[]},te="snf.cart";function Be(d,t){switch(t.type){case"SET":return t.payload;case"ADD_ITEM":{const e=d.items.findIndex(a=>a.variantId===t.payload.variantId);if(e>=0){const a=[...d.items];return a[e]={...a[e],quantity:a[e].quantity+t.payload.quantity},{items:a}}return{items:[...d.items,t.payload]}}case"REMOVE_ITEM":return{items:d.items.filter(e=>e.variantId!==t.payload.variantId)};case"INCREMENT":return{items:d.items.map(e=>e.variantId===t.payload.variantId?{...e,quantity:Math.min(99,e.quantity+1)}:e)};case"DECREMENT":return{items:d.items.map(e=>e.variantId===t.payload.variantId?{...e,quantity:Math.max(1,e.quantity-1)}:e)};case"CLEAR":return{items:[]};default:return d}}const ne=u.createContext(void 0),Qe=({children:d})=>{const[t,e]=u.useReducer(Be,qe,m=>{try{const h=localStorage.getItem(te);if(h){const E=JSON.parse(h);if(E&&Array.isArray(E.items))return E}}catch{}return m});u.useEffect(()=>{try{localStorage.setItem(te,JSON.stringify(t))}catch{}},[t]);const a=u.useMemo(()=>t.items.reduce((m,h)=>m+h.price*h.quantity,0),[t.items]),n=u.useMemo(()=>t.items.reduce((m,h)=>m+h.quantity,0),[t.items]),x={state:t,addItem:(m,h,E=1)=>{var R;const v=(h==null?void 0:h.buyOncePrice)||(h==null?void 0:h.mrp)||0,j=(R=m==null?void 0:m.product)==null?void 0:R.attachmentUrl,y=j?`https://www.indraai.in${j}`:void 0,w={productId:m.product.id,variantId:h.id,name:m.product.name,variantName:h.name||"",price:typeof v=="number"?v:0,quantity:Math.max(1,Math.min(99,E||1)),imageUrl:y};e({type:"ADD_ITEM",payload:w})},removeItem:m=>e({type:"REMOVE_ITEM",payload:{variantId:m}}),increment:m=>e({type:"INCREMENT",payload:{variantId:m}}),decrement:m=>e({type:"DECREMENT",payload:{variantId:m}}),clear:()=>e({type:"CLEAR"}),subtotal:a,totalQuantity:n};return r.jsx(ne.Provider,{value:x,children:d})};function Ve(){const d=u.useContext(ne);if(!d)throw new Error("useCart must be used within CartProvider");return d}const re=new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}),Ke=()=>{const{state:d,subtotal:t,totalQuantity:e,increment:a,decrement:n,removeItem:s}=Ve(),[o,c]=u.useState(!1);return u.useEffect(()=>{c(!0);const i=setTimeout(()=>c(!1),300);return()=>clearTimeout(i)},[e]),r.jsxs(Ie,{children:[r.jsx(Pe,{asChild:!0,children:r.jsxs("button",{id:"snf-cart-button",className:"relative inline-flex items-center justify-center rounded-md h-9 w-9 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring","aria-label":"Cart",children:[r.jsx(Se,{className:"size-5","aria-hidden":!0}),r.jsx("span",{className:`absolute -top-1 -right-1 min-w-5 h-5 px-1 rounded-full bg-primary text-[10px] text-primary-foreground grid place-items-center transition-transform duration-300 ${o?"scale-110":""}`,"aria-live":"polite","aria-atomic":"true",children:e})]})}),r.jsxs(Ae,{align:"end",sideOffset:8,className:"z-[60] w-80 sm:w-96 p-0",children:[r.jsx("div",{className:"p-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-semibold",children:"Your Cart"}),r.jsxs("span",{className:"text-xs text-muted-foreground",children:[e," items"]})]})}),r.jsx(V,{}),r.jsx("div",{className:"max-h-80 overflow-y-auto",children:d.items.length===0?r.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Your cart is empty."}):r.jsx("ul",{className:"divide-y",children:d.items.map(i=>r.jsxs("li",{className:"p-3 flex gap-3",children:[r.jsx("div",{className:"size-14 shrink-0 rounded-md overflow-hidden bg-muted/30 grid place-items-center",children:i.imageUrl?r.jsx("img",{src:i.imageUrl,alt:i.name,className:"h-full w-full object-cover",loading:"lazy"}):r.jsx("span",{className:"text-xs text-muted-foreground",children:"No image"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"text-sm font-medium truncate",children:i.name}),r.jsx("p",{className:"text-xs text-muted-foreground truncate",children:i.variantName})]}),r.jsx("button",{className:"p-1 rounded hover:bg-accent",onClick:()=>s(i.variantId),"aria-label":`Remove ${i.name}`,children:r.jsx(ve,{className:"size-4"})})]}),r.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 border rounded-md px-2 py-1",children:[r.jsx("button",{className:"p-1 rounded hover:bg-accent",onClick:()=>n(i.variantId),"aria-label":"Decrease quantity",children:r.jsx(je,{className:"size-4"})}),r.jsx("span",{className:"text-sm w-5 text-center",children:i.quantity}),r.jsx("button",{className:"p-1 rounded hover:bg-accent",onClick:()=>a(i.variantId),"aria-label":"Increase quantity",children:r.jsx(De,{className:"size-4"})})]}),r.jsx("div",{className:"text-sm font-medium",children:re.format(i.price*i.quantity)})]})]})]},i.variantId))})}),r.jsx(V,{}),r.jsxs("div",{className:"p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-muted-foreground",children:"Subtotal"}),r.jsx("span",{className:"font-semibold",children:re.format(t)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:r.jsx(G,{to:"/snf",children:"Continue shopping"})}),r.jsx(M,{size:"sm",disabled:d.items.length===0,asChild:!0,children:r.jsx(G,{to:"/snf/checkout",children:"Checkout"})})]})]})]})]})},He=d=>{const[t,e]=u.useState(!1),[a,n]=u.useState(!1),[s,o]=u.useState(()=>k.getCurrentLocation()),[c,i]=u.useState(()=>(s==null?void 0:s.pincode)||""),[p,x]=u.useState(null),[m,h]=u.useState(null),E=/^\d{6}$/.test(c);u.useEffect(()=>{const y=()=>e(window.scrollY>8);return window.addEventListener("scroll",y,{passive:!0}),()=>window.removeEventListener("scroll",y)},[]),u.useEffect(()=>{(async()=>{await k.migrateFromOldPincodeStorage();const w=k.getCurrentLocation();w&&(o(w),i(w.pincode))})()},[]);const v=async()=>{h(null),x("pin");try{const y=await k.updateLocationByPincode(c);y?(o(y),i(y.pincode),n(!1),console.log(`Location updated: ${y.pincode} -> Depot: ${y.depotName} (${y.depotId})`)):h("We don't deliver to this pincode yet. Check back soon!")}catch(y){h((y==null?void 0:y.message)||"Failed to resolve pincode")}finally{x(null)}},j=async()=>{h(null),x("geo");try{const y=await T.requestLocationWithExplanation(),w=await k.updateLocationByPincode(y.pincode);w?(o(w),i(w.pincode),n(!1),console.log(`Location detected: ${w.pincode} -> Depot: ${w.depotName} (${w.depotId})`)):(i(y.pincode),h("We don't deliver to this location yet. Check back soon!"))}catch(y){h((y==null?void 0:y.message)||"Unable to get location")}finally{x(null)}};return r.jsx("header",{className:`top-0 inset-x-0 z-40 bg-background/95 supports-[backdrop-filter]:bg-background/60 backdrop-blur border-b transition-all pt-[env(safe-area-inset-top)] ${t?"sticky shadow-sm":"relative"}`,"aria-label":"SNF store global header",children:r.jsxs("div",{className:"container mx-auto px-3 md:px-6 lg:px-8",children:[r.jsxs("div",{className:"h-14 md:h-16 flex items-center justify-between gap-2 md:gap-3 min-w-0",children:[r.jsxs("a",{href:"/snf",className:"flex items-center gap-2 min-w-0","aria-label":"SNF Home",children:[r.jsx("div",{className:"size-8 rounded-md bg-primary text-primary-foreground grid place-items-center font-bold shrink-0",children:"S"}),r.jsx("span",{className:"hidden sm:inline text-base md:text-lg font-semibold tracking-tight truncate",children:"SNF Market"})]}),r.jsx("div",{className:"flex-1 max-w-xl hidden md:flex items-center min-w-0",children:r.jsx(ee,{})}),r.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2 shrink-0",children:[r.jsxs(K,{open:a,onOpenChange:n,children:[r.jsx(z,{asChild:!0,children:r.jsxs(M,{variant:"outline",size:"sm","aria-label":"Select delivery location",className:"whitespace-nowrap",children:[r.jsx(W,{className:"size-4"}),s&&s.depotName?r.jsxs("span",{className:"hidden sm:inline",children:[s.pincode," • ",s.depotName]}):c?r.jsxs("span",{className:"hidden sm:inline",children:["Pincode: ",c]}):r.jsx("span",{className:"hidden sm:inline",children:"Set location"})]})}),r.jsxs(Y,{align:"end",sideOffset:8,className:"w-72 z-[60]",children:[r.jsxs(Q,{className:"flex items-center gap-2",children:[r.jsx(W,{className:"size-4"}),"Choose delivery location"]}),r.jsxs("div",{className:"px-2 py-1.5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_e,{inputMode:"numeric",pattern:"\\d{6}",maxLength:6,placeholder:"Enter 6-digit pincode",value:c,onChange:y=>{const w=y.target.value.replace(/\D/g,"").slice(0,6);i(w),h(null)},"aria-invalid":c.length>0&&!E}),r.jsx(M,{size:"sm",disabled:!E||p==="pin",onClick:v,"aria-label":"Apply pincode",children:p==="pin"?r.jsx(H,{className:"size-4 animate-spin"}):r.jsx(Oe,{className:"size-4"})})]}),m&&r.jsx("p",{className:"text-xs text-destructive mt-1",children:m}),!m&&c&&!E&&r.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Pincode must be 6 digits"})]}),r.jsx(J,{}),r.jsxs(X,{onClick:j,className:"cursor-pointer",disabled:p==="geo",children:[p==="geo"?r.jsx(H,{className:"size-4 animate-spin"}):r.jsx(Re,{className:"size-4"}),"Use my current location"]})]})]}),r.jsx("div",{className:"hidden sm:inline-flex",children:r.jsx(ke,{isLoggedIn:!0})}),r.jsx("a",{href:"/snf",className:"md:hidden inline-flex items-center justify-center rounded-md h-9 w-9 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring","aria-label":"Search",children:r.jsx(ae,{className:"size-5","aria-hidden":"true"})}),r.jsxs(K,{children:[r.jsx(z,{asChild:!0,children:r.jsx("button",{type:"button",className:"inline-flex items-center justify-center rounded-md h-9 w-9 focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-ring","aria-label":"Account",children:r.jsx(Le,{className:"size-5","aria-hidden":!0})})}),r.jsxs(Y,{align:"end",sideOffset:8,className:"w-44",children:[r.jsx(Q,{children:"Account"}),r.jsx(J,{}),r.jsx(X,{asChild:!0,children:r.jsx("a",{href:"/snf/address",className:"w-full",children:"Address"})})]})]}),r.jsx(Ke,{})]})]}),r.jsx("div",{className:"md:hidden pb-2",children:r.jsx(ee,{})})]})})},Je=()=>r.jsxs("footer",{className:"bg-slate-50 dark:bg-gray-900 text-gray-700 dark:text-gray-300 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-x-8 gap-y-10",children:[r.jsxs("div",{className:"md:col-span-12 lg:col-span-4",children:[r.jsxs("div",{className:"mb-6 flex items-center",children:[r.jsx("span",{className:"inline-grid place-items-center h-10 w-10 rounded bg-primary text-primary-foreground mr-3 font-bold",children:"S"}),r.jsx("span",{className:"text-xl font-bold",children:"SNF Market"})]}),r.jsx("p",{className:"text-sm mb-6 leading-relaxed",children:"Fresh groceries delivered fast. Pure, natural, and carefully curated selection."}),r.jsx("h3",{className:"text-[0.9rem] font-semibold mb-3 text-gray-600 dark:text-gray-400",children:"Payment Accepted"}),r.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:["Mastercard","Discover","UPI","Visa","Stripe"].map(d=>r.jsx("span",{className:"text-xs px-2 py-1 bg-gray-200 dark:bg-gray-700 rounded-md shadow-sm",children:d},d))})]}),r.jsx("div",{className:"hidden lg:block lg:col-span-1"}),r.jsxs("div",{className:"md:col-span-4 lg:col-span-2",children:[r.jsx("h3",{className:"text-md font-semibold mb-4 border-b-2 border-primary pb-1 inline-block",children:"Policies"}),r.jsxs("ul",{className:"space-y-2.5 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"/privacy-policy",className:"hover:text-primary transition-colors",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx("a",{href:"/refund-policy",className:"hover:text-primary transition-colors",children:"Refund Policy"})}),r.jsx("li",{children:r.jsx("a",{href:"/shipping-policy",className:"hover:text-primary transition-colors",children:"Shipping Policy"})}),r.jsx("li",{children:r.jsx("a",{href:"/terms-and-conditions",className:"hover:text-primary transition-colors",children:"Terms & Conditions"})})]})]}),r.jsxs("div",{className:"md:col-span-4 lg:col-span-2",children:[r.jsx("h3",{className:"text-md font-semibold mb-4 border-b-2 border-primary pb-1 inline-block",children:"Useful Links"}),r.jsxs("ul",{className:"space-y-2.5 text-sm",children:[r.jsx("li",{children:r.jsx("a",{href:"/snf",className:"hover:text-primary transition-colors",children:"Home"})}),r.jsx("li",{children:r.jsx("a",{href:"/snf#products",className:"hover:text-primary transition-colors",children:"Products"})}),r.jsx("li",{children:r.jsx("a",{href:"/about",className:"hover:text-primary transition-colors",children:"About"})}),r.jsx("li",{children:r.jsx("a",{href:"/contact",className:"hover:text-primary transition-colors",children:"Contact"})})]})]}),r.jsxs("div",{className:"md:col-span-4 lg:col-span-3",children:[r.jsx("h3",{className:"text-md font-semibold mb-4 border-b-2 border-primary pb-1 inline-block",children:"Contact"}),r.jsxs("address",{className:"text-sm not-italic space-y-2 leading-relaxed",children:[r.jsx("p",{children:"SNF Market, Fresh Street, Farm District, 421201"}),r.jsx("p",{children:r.jsx("a",{href:"mailto:hello@snf.example",className:"hover:text-primary transition-colors break-all",children:"hello@snf.example"})}),r.jsx("p",{children:r.jsx("a",{href:"tel:+910000000000",className:"hover:text-primary transition-colors",children:"+91 0000000000"})})]})]})]})}),r.jsx("div",{className:"bg-gray-200 dark:bg-gray-800 py-4 border-t border-gray-300 dark:border-gray-700",children:r.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col md:flex-row justify-between items-center text-xs text-gray-600 dark:text-gray-400",children:[r.jsxs("p",{className:"mb-2 md:mb-0 text-center md:text-left",children:["© ",new Date().getFullYear()," SNF Market. All Rights Reserved."]}),r.jsx("p",{className:"text-center md:text-right",children:"Built with love and veggies."})]})})]});export{Qe as C,k as D,Je as F,He as H,Ye as P,Ve as a,Z as p,Fe as u};
