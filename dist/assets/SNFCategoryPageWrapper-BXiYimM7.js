import{r as o,U as we,j as e,V as Pe,W as Ce,X as O,Y as F,Z as z,_ as Ne,$ as ae,a0 as Re,a1 as Ee,a2 as V,a3 as De,a4 as ke,B as X,w as _e,a5 as Ae,a6 as Me,a7 as Ie,D as Te,a8 as te,a9 as Be,aa as Oe,ab as Ve,ac as ze,ad as Ke,ae as re,af as ne,C as Le,ag as Fe,u as He,b as $e,ah as Ue,p as se}from"./index-BtRkqcd7.js";import{a as Ye,H as Xe,F as We,P as Ge,C as qe}from"./Footer-D0AQsJ6e.js";import{P as Ze}from"./ProductGrid-0clt8OIt.js";var oe=["PageUp","PageDown"],ie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ce={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},K="Slider",[W,Je,Qe]=Ce(K),[le,Pt]=Pe(K,[Qe]),[et,$]=le(K),de=o.forwardRef((t,r)=>{const{name:n,min:s=0,max:d=100,step:f=1,orientation:a="horizontal",disabled:m=!1,minStepsBetweenThumbs:g=0,defaultValue:S=[s],value:P,onValueChange:i=()=>{},onValueCommit:p=()=>{},inverted:j=!1,form:N,...w}=t,b=o.useRef(new Set),c=o.useRef(0),C=a==="horizontal"?tt:rt,[R=[],I]=we({prop:P,defaultProp:S,onChange:D=>{var M;(M=[...b.current][c.current])==null||M.focus(),i(D)}}),L=o.useRef(R);function T(D){const k=it(R,D);E(D,k)}function U(D){E(D,c.current)}function H(){const D=L.current[c.current];R[c.current]!==D&&p(R)}function E(D,k,{commit:M}={commit:!1}){const u=ut(f),l=mt(Math.round((D-s)/f)*f+s,u),h=ae(l,[s,d]);I((v=[])=>{const x=at(v,h,k);if(dt(x,g*f)){c.current=x.indexOf(h);const B=String(x)!==String(v);return B&&M&&p(x),B?x:v}else return v})}return e.jsx(et,{scope:t.__scopeSlider,name:n,disabled:m,min:s,max:d,valueIndexToChangeRef:c,thumbs:b.current,values:R,orientation:a,form:N,children:e.jsx(W.Provider,{scope:t.__scopeSlider,children:e.jsx(W.Slot,{scope:t.__scopeSlider,children:e.jsx(C,{"aria-disabled":m,"data-disabled":m?"":void 0,...w,ref:r,onPointerDown:O(w.onPointerDown,()=>{m||(L.current=R)}),min:s,max:d,inverted:j,onSlideStart:m?void 0:T,onSlideMove:m?void 0:U,onSlideEnd:m?void 0:H,onHomeKeyDown:()=>!m&&E(s,0,{commit:!0}),onEndKeyDown:()=>!m&&E(d,R.length-1,{commit:!0}),onStepKeyDown:({event:D,direction:k})=>{if(!m){const l=oe.includes(D.key)||D.shiftKey&&ie.includes(D.key)?10:1,h=c.current,v=R[h],x=f*l*k;E(v+x,h,{commit:!0})}}})})})})});de.displayName=K;var[ue,me]=le(K,{startEdge:"left",endEdge:"right",size:"width",direction:1}),tt=o.forwardRef((t,r)=>{const{min:n,max:s,dir:d,inverted:f,onSlideStart:a,onSlideMove:m,onSlideEnd:g,onStepKeyDown:S,...P}=t,[i,p]=o.useState(null),j=z(r,C=>p(C)),N=o.useRef(void 0),w=Ne(d),b=w==="ltr",c=b&&!f||!b&&f;function y(C){const R=N.current||i.getBoundingClientRect(),I=[0,R.width],T=Z(I,c?[n,s]:[s,n]);return N.current=R,T(C-R.left)}return e.jsx(ue,{scope:t.__scopeSlider,startEdge:c?"left":"right",endEdge:c?"right":"left",direction:c?1:-1,size:"width",children:e.jsx(fe,{dir:w,"data-orientation":"horizontal",...P,ref:j,style:{...P.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const R=y(C.clientX);a==null||a(R)},onSlideMove:C=>{const R=y(C.clientX);m==null||m(R)},onSlideEnd:()=>{N.current=void 0,g==null||g()},onStepKeyDown:C=>{const I=ce[c?"from-left":"from-right"].includes(C.key);S==null||S({event:C,direction:I?-1:1})}})})}),rt=o.forwardRef((t,r)=>{const{min:n,max:s,inverted:d,onSlideStart:f,onSlideMove:a,onSlideEnd:m,onStepKeyDown:g,...S}=t,P=o.useRef(null),i=z(r,P),p=o.useRef(void 0),j=!d;function N(w){const b=p.current||P.current.getBoundingClientRect(),c=[0,b.height],C=Z(c,j?[s,n]:[n,s]);return p.current=b,C(w-b.top)}return e.jsx(ue,{scope:t.__scopeSlider,startEdge:j?"bottom":"top",endEdge:j?"top":"bottom",size:"height",direction:j?1:-1,children:e.jsx(fe,{"data-orientation":"vertical",...S,ref:i,style:{...S.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const b=N(w.clientY);f==null||f(b)},onSlideMove:w=>{const b=N(w.clientY);a==null||a(b)},onSlideEnd:()=>{p.current=void 0,m==null||m()},onStepKeyDown:w=>{const c=ce[j?"from-bottom":"from-top"].includes(w.key);g==null||g({event:w,direction:c?-1:1})}})})}),fe=o.forwardRef((t,r)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:d,onSlideEnd:f,onHomeKeyDown:a,onEndKeyDown:m,onStepKeyDown:g,...S}=t,P=$(K,n);return e.jsx(F.span,{...S,ref:r,onKeyDown:O(t.onKeyDown,i=>{i.key==="Home"?(a(i),i.preventDefault()):i.key==="End"?(m(i),i.preventDefault()):oe.concat(ie).includes(i.key)&&(g(i),i.preventDefault())}),onPointerDown:O(t.onPointerDown,i=>{const p=i.target;p.setPointerCapture(i.pointerId),i.preventDefault(),P.thumbs.has(p)?p.focus():s(i)}),onPointerMove:O(t.onPointerMove,i=>{i.target.hasPointerCapture(i.pointerId)&&d(i)}),onPointerUp:O(t.onPointerUp,i=>{const p=i.target;p.hasPointerCapture(i.pointerId)&&(p.releasePointerCapture(i.pointerId),f(i))})})}),he="SliderTrack",pe=o.forwardRef((t,r)=>{const{__scopeSlider:n,...s}=t,d=$(he,n);return e.jsx(F.span,{"data-disabled":d.disabled?"":void 0,"data-orientation":d.orientation,...s,ref:r})});pe.displayName=he;var G="SliderRange",xe=o.forwardRef((t,r)=>{const{__scopeSlider:n,...s}=t,d=$(G,n),f=me(G,n),a=o.useRef(null),m=z(r,a),g=d.values.length,S=d.values.map(p=>ye(p,d.min,d.max)),P=g>1?Math.min(...S):0,i=100-Math.max(...S);return e.jsx(F.span,{"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,...s,ref:m,style:{...t.style,[f.startEdge]:P+"%",[f.endEdge]:i+"%"}})});xe.displayName=G;var q="SliderThumb",ge=o.forwardRef((t,r)=>{const n=Je(t.__scopeSlider),[s,d]=o.useState(null),f=z(r,m=>d(m)),a=o.useMemo(()=>s?n().findIndex(m=>m.ref.current===s):-1,[n,s]);return e.jsx(nt,{...t,ref:f,index:a})}),nt=o.forwardRef((t,r)=>{const{__scopeSlider:n,index:s,name:d,...f}=t,a=$(q,n),m=me(q,n),[g,S]=o.useState(null),P=z(r,y=>S(y)),i=g?a.form||!!g.closest("form"):!0,p=Re(g),j=a.values[s],N=j===void 0?0:ye(j,a.min,a.max),w=ot(s,a.values.length),b=p==null?void 0:p[m.size],c=b?ct(b,N,m.direction):0;return o.useEffect(()=>{if(g)return a.thumbs.add(g),()=>{a.thumbs.delete(g)}},[g,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[m.startEdge]:`calc(${N}% + ${c}px)`},children:[e.jsx(W.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(F.span,{role:"slider","aria-label":t["aria-label"]||w,"aria-valuemin":a.min,"aria-valuenow":j,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...f,ref:P,style:j===void 0?{display:"none"}:t.style,onFocus:O(t.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),i&&e.jsx(ve,{name:d??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:j},s)]})});ge.displayName=q;var st="RadioBubbleInput",ve=o.forwardRef(({__scopeSlider:t,value:r,...n},s)=>{const d=o.useRef(null),f=z(d,s),a=Ee(r);return o.useEffect(()=>{const m=d.current;if(!m)return;const g=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(g,"value").set;if(a!==r&&P){const i=new Event("input",{bubbles:!0});P.call(m,r),m.dispatchEvent(i)}},[a,r]),e.jsx(F.input,{style:{display:"none"},...n,ref:f,defaultValue:r})});ve.displayName=st;function at(t=[],r,n){const s=[...t];return s[n]=r,s.sort((d,f)=>d-f)}function ye(t,r,n){const f=100/(n-r)*(t-r);return ae(f,[0,100])}function ot(t,r){return r>2?`Value ${t+1} of ${r}`:r===2?["Minimum","Maximum"][t]:void 0}function it(t,r){if(t.length===1)return 0;const n=t.map(d=>Math.abs(d-r)),s=Math.min(...n);return n.indexOf(s)}function ct(t,r,n){const s=t/2,f=Z([0,50],[0,s]);return(s-f(r)*n)*n}function lt(t){return t.slice(0,-1).map((r,n)=>t[n+1]-r)}function dt(t,r){if(r>0){const n=lt(t);return Math.min(...n)>=r}return!0}function Z(t,r){return n=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(t[1]-t[0]);return r[0]+s*(n-t[0])}}function ut(t){return(String(t).split(".")[1]||"").length}function mt(t,r){const n=Math.pow(10,r);return Math.round(t*n)/n}var ft=de,ht=pe,pt=xe,xt=ge;function gt({className:t,defaultValue:r,value:n,min:s=0,max:d=100,...f}){const a=o.useMemo(()=>Array.isArray(n)?n:Array.isArray(r)?r:[s,d],[n,r,s,d]);return e.jsxs(ft,{"data-slot":"slider",defaultValue:r,value:n,min:s,max:d,className:V("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",t),...f,children:[e.jsx(ht,{"data-slot":"slider-track",className:V("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(pt,{"data-slot":"slider-range",className:V("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(m,g)=>e.jsx(xt,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},g))]})}const vt=Me("m-1 transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110 duration-300",{variants:{variant:{default:"border-foreground/10 text-foreground bg-card hover:bg-card/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",inverted:"inverted"}},defaultVariants:{variant:"default"}}),yt=o.forwardRef(({options:t,onValueChange:r,variant:n,defaultValue:s=[],placeholder:d="Select options",animation:f=0,maxCount:a=3,asChild:m=!1,className:g,...S},P)=>{const[i,p]=o.useState(new Set(s)),[j,N]=o.useState(!1);o.useEffect(()=>{p(new Set(s))},[s]);const w=c=>{c.key==="Enter"&&N(!0)},b=c=>{const y=new Set(i);y.has(c)?y.delete(c):y.add(c),p(y),r(Array.from(y))};return e.jsxs(De,{open:j,onOpenChange:N,children:[e.jsx(ke,{asChild:!0,children:e.jsx(X,{ref:P,...S,onClick:()=>N(!j),className:"flex w-full p-1 rounded-md border min-h-10 h-auto items-center justify-between bg-inherit hover:bg-card",children:i.size>0?e.jsxs("div",{className:"flex justify-between items-center w-full",children:[e.jsx("div",{className:"flex flex-wrap items-center",children:t.filter(c=>i.has(c.value)).map(c=>e.jsxs(_e,{className:V(vt({variant:n,className:g})),style:{animationDuration:`${f}s`},children:[c.label,e.jsx(Ae,{className:"ml-2 h-4 w-4 cursor-pointer",onClick:y=>{y.stopPropagation(),b(c.value)}})]},c.value))}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ie,{className:"h-4 mx-2 cursor-pointer text-muted-foreground",onClick:c=>{c.stopPropagation(),p(new Set),r([])}}),e.jsx(Te,{orientation:"vertical",className:"flex min-h-6 h-full"}),e.jsx(te,{className:"h-4 mx-2 cursor-pointer text-muted-foreground"})]})]}):e.jsxs("div",{className:"flex items-center justify-between w-full mx-auto",children:[e.jsx("span",{className:"text-sm text-muted-foreground mx-3",children:d}),e.jsx(te,{className:"h-4 cursor-pointer text-muted-foreground mx-2"})]})})}),e.jsx(Be,{className:"w-full p-0",align:"start",children:e.jsxs(Oe,{children:[e.jsx(Ve,{placeholder:"Search...",onKeyDown:w}),e.jsxs(ze,{children:[e.jsx(Ke,{children:"No results found."}),e.jsx(re,{children:t.map((c,y)=>{const C=i.has(c.value);return e.jsxs(ne,{onSelect:()=>b(c.value),style:{pointerEvents:"auto",opacity:1},className:"cursor-pointer",children:[e.jsx("div",{className:V("mr-2 flex h-4 w-4 items-center justify-center rounded-sm border border-primary",C?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(Le,{className:V("h-4 w-4")})}),c.icon&&e.jsx(c.icon,{className:"mr-2 h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:c.label})]},c.value)})}),i.size>0&&e.jsxs(e.Fragment,{children:[e.jsx(Fe,{}),e.jsx(re,{children:e.jsx(ne,{onSelect:()=>{p(new Set),r([])},style:{pointerEvents:"auto",opacity:1},className:"cursor-pointer",children:"Clear selection"})})]})]})]})})]})}),bt=()=>{const{categoryId:t}=He(),r=$e(),[n,s]=o.useState([]),[d,f]=o.useState(""),[a,m]=o.useState(!1),[g,S]=o.useState(null),{addItem:P,state:i}=Ye(),[p,j]=o.useState([]),[N,w]=o.useState(!1),[b,c]=o.useState("all"),[y,C]=o.useState([0,0]),[R,I]=o.useState([]),[L,T]=o.useState(!1),[U,H]=o.useState(null);o.useEffect(()=>{(async()=>{var l;if(t){m(!0),S(null);try{const v=await se.getProductsByCategory(parseInt(t),2);v.length>0&&f(((l=v[0].category)==null?void 0:l.name)||"Category");const x=v.map(B=>{const J=Array.isArray(B.variants)?B.variants:[],Y=J.filter(_=>!_.notInStock&&!_.isHidden),Q=Y.map(_=>{const A=_.buyOncePrice??_.mrp??0;return typeof A=="number"&&isFinite(A)&&A>0?A:0}).filter(_=>_>0),be=Q.length>0?Math.min(...Q):0,Se=Y.length>0,ee=Y.map(_=>{const A=_.mrp??0;return typeof A=="number"&&isFinite(A)&&A>0?A:0}).filter(_=>_>0),je=ee.length>0?Math.max(...ee):0;return{product:B,variants:J,buyOncePrice:be,mrp:je,inStock:Se,deliveryTime:"Same day delivery"}});s(x)}catch(h){S((h==null?void 0:h.message)||"Failed to load products")}finally{m(!1)}}})()},[t]),o.useEffect(()=>{(async()=>{T(!0),H(null);try{const l=await se.getCategories(),h=(Array.isArray(l)?l:[]).map(v=>({id:String(v.id??v._id??v.slug??""),name:v.name||v.title||"Category"}));I(h)}catch(l){H((l==null?void 0:l.message)||"Failed to load categories")}finally{T(!1)}})()},[]);const E=o.useMemo(()=>{if(!n||n.length===0)return[0,1e3];const u=n.map(x=>typeof x.buyOncePrice=="number"?x.buyOncePrice:0).filter(x=>x>0),l=n.map(x=>typeof x.mrp=="number"?x.mrp:typeof x.buyOncePrice=="number"?x.buyOncePrice:0).filter(x=>x>0),h=u.length>0?Math.floor(Math.min(...u)):0,v=l.length>0?Math.ceil(Math.max(...l)):Math.ceil(h*2)||1e3;return[h,Math.max(v,h)]},[n]);o.useEffect(()=>{C(E)},[E]);const D=o.useMemo(()=>{const u=new Set;n.forEach(h=>{const v=h.product.tags;v&&v.split(",").map(x=>x.trim()).filter(Boolean).forEach(x=>u.add(x.toLowerCase()))});const l=h=>h.split(" ").map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" ");return Array.from(u).sort().map(h=>({label:l(h),value:h}))},[n]),k=o.useMemo(()=>{let u=n;return y&&(y[0]!==E[0]||y[1]!==E[1])&&(u=u.filter(l=>{const h=typeof l.buyOncePrice=="number"?l.buyOncePrice:0;return h>=y[0]&&h<=y[1]})),N&&(u=u.filter(l=>l.inStock)),b==="contains"?u=u.filter(l=>!!l.product.isDairyProduct):b==="non"&&(u=u.filter(l=>!l.product.isDairyProduct)),p.length>0&&(u=u.filter(l=>{const h=l.product.tags;if(!h)return!1;const v=h.split(",").map(x=>x.trim().toLowerCase()).filter(Boolean);return p.some(x=>x==="pasteurized"||x==="pasturized"?v.includes("pasteurized")||v.includes("pasturized"):v.includes(x))})),u},[n,y,E,N,b,p]),M=(u,l,h)=>{l&&P(u,l,h||1)};return e.jsxs("div",{className:"min-h-screen flex flex-col bg-background",children:[e.jsx(Xe,{cartCount:i.items.reduce((u,l)=>u+l.quantity,0),onSearch:()=>{}}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 md:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"flex items-end justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-semibold",children:a?"Loading...":`${d} Products`}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[k.length," results",n.length!==k.length?` • ${n.length} total`:""]})]}),g&&e.jsx("p",{className:"text-red-500",children:g})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[260px_1fr] gap-6",children:[e.jsx("aside",{className:"rounded-lg border bg-card text-card-foreground p-4 h-fit",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground",children:"Categories"}),U&&e.jsx(X,{size:"sm",variant:"outline",onClick:()=>r(0),children:"Retry"})]}),e.jsx("div",{className:"space-y-1 max-h-56 overflow-auto pr-1",children:L?Array.from({length:6}).map((u,l)=>e.jsx("div",{className:"h-4 bg-muted/40 rounded animate-pulse"},l)):R.map(u=>{const l=parseInt(u.id,10),h=t?parseInt(t,10)===l:!1;return e.jsx("button",{onClick:()=>r(`/snf/category/${l}`),className:`w-full text-left text-sm px-2 py-1 rounded hover:bg-accent ${h?"text-primary font-medium":""}`,children:u.name},u.id)})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground mb-2",children:"Price"}),e.jsxs("div",{className:"px-1 py-2",children:[e.jsx(gt,{min:E[0],max:E[1],value:[y[0],y[1]],onValueChange:u=>{const l=Array.isArray(u)?u:[E[0],E[1]];C([l[0]??E[0],l[1]??E[1]])}}),e.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("span",{children:["₹",y[0]]}),e.jsxs("span",{children:["₹",y[1]]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm uppercase tracking-wide text-muted-foreground mb-2",children:"Tags"}),e.jsx(yt,{options:D,onValueChange:u=>j(u),defaultValue:p,placeholder:"Select tags"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ue,{checked:N,onCheckedChange:u=>w(!!u)}),"In stock only"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"snf-dairy",className:"text-sm text-muted-foreground",children:"Dairy"}),e.jsxs("select",{id:"snf-dairy",className:"h-9 rounded-md border px-2 text-sm bg-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",value:b,onChange:u=>c(u.target.value),children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"contains",children:"Contains Dairy"}),e.jsx("option",{value:"non",children:"Non-Dairy"})]})]})]}),e.jsx("div",{className:"pt-2",children:e.jsx(X,{variant:"outline",className:"w-full",onClick:()=>{j([]),w(!1),c("all"),C(E)},children:"Clear filters"})})]})}),e.jsx("section",{children:e.jsx(Ze,{products:k,onAddToCart:M,isLoading:a})})]})]}),e.jsx(We,{})]})},Ct=()=>e.jsx(Ge,{children:e.jsx(qe,{children:e.jsx(bt,{})})});export{Ct as default};
